services:
  # backend api server
  - type: web
    name: featherweight-server
    runtime: docker
    # build docker image
    dockerfilePath: ./server/Dockerfile
    dockerContext: ./server
    plan: free
    healthCheckPath: /
    envVars:
      # set on render dashboard
      - key: EBIRD_API_KEY
        sync: false
      - key: EBIRD_USERNAME
        sync: false
      - key: EBIRD_PASSWORD
        sync: false
      - key: SESSION_FILE
        value: server/data/.ebird_session.json
      - key: DATA_SYNC_DAY
        value: "1"
      - key: DATA_SYNC_HOUR
        value: "2"
      - key: MANUAL_SYNC
        value: "False"
      - key: CLIENT_URL
        sync: false # Set manually in Render dashboard - fromService doesn't support 'url' property

  # frontend
  - type: web
    name: ebird-featherweight
    runtime: docker
    # build docker image
    dockerfilePath: ./client/Dockerfile
    dockerContext: ./client
    plan: free
    envVars:
      - key: BACKEND_HOST
        sync: false
